## IMU



## 1. IMU

### 测量模型

https://zhuanlan.zhihu.com/p/38009126

在IMU内部，除了通常的白噪声，还有个特别的量零偏**bias**，在这是传感器内部机械、温度等各种物理因素产生的传感器内部误差的综合参数。IMU的加速度计和陀螺仪的每个轴都用彼此相互独立的参数建模，一个角速度测量值和真值之间的连续域上的关系可以写作：

![image-20210903075018481](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075018481.png)

IMU每个时刻可实现自身主体加速度$a$和角速度$w$的测量，有测量模型 式(1)：

![image-20210903074800349](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903074800349.png)

### 运动模型

式(2)：

![image-20210903075114747](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075114747.png)

在区间$[t, t+\Delta t]$里有 式(3)：

![image-20210903075202338](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075202338.png)

将式1、2带入式3可得 式(4)：

![image-20210903075315906](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075315906.png)

从式4可以看到，IMU可以干的事情就是由上个时刻$t$状态可以推算出下个时刻$t+\Delta t$的状态， 这里的状态就是旋转角度R, 速度V和位置P。

### IMU 预积分的作用是什么？

用IMU的slam、vio算法有很多，有滤波器的比如**MSCKF**，有基于图优化的比如**VINS**，**OKVIS，ORB-SLAM**等。就拿**ORB-SLAM**来说吧， 在bundle adjustment里，参与对象是keyframe，比如有2个keyframe： $KF_1, KF_2$，他们的位姿分别为： $P_{1w}, P_{2w}$，那么他们的相对位姿 :

![image-20210903075655223](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075655223.png)

我们可以认为$P_{21}$为**估计项**，是由SLAM的位姿直接算出来的。如果要构成一个优化问题，我们还需要知道**误差项**和**测量项。**没错，是IMU可以计算在这两个KF间的**测量项** $P_{imu}$，预计分干的事情就是计算这个测量项。

![image-20210903075804403](%E5%9B%BE%E8%A1%A8%E5%BA%93/image-20210903075804403.png)

在紧耦合的优化slam中，IMU就是提供了两个关键帧的相对测量，从而构建误差函数对关键帧姿态的迭代优化。当然实际应用中不会是这么简单的形式，这里面要对各个变量分别求取误差，然后求雅克比矩阵。